// page.scss
@import "main";
@import "compass/layout/stretching";


body.page {

	background-position: 0 $col;

	article.document {
		position: relative;
		font-size: $font-normal;
		@include background-image(linear-gradient(to right, $blue-dark, $blue-dark ), linear-gradient(to right, $blue-dark, $blue-dark ));
		background-position: 0 0, 0 bottom;
		background-size: 100% ($col * 3), 100% $col;
		background-repeat: no-repeat;

		&:last-of-type {
			@include background-image(linear-gradient(to right, $blue-dark, $blue-dark ));
			background-position: 0 0;
			background-size: 100% ($col * 3);
			background-repeat: no-repeat;
		}

		figure {
			position: absolute;
			z-index: $z-lowest;
			left: 0;
			right: 0;
			top: 0;
			width: 100%;
			height: $col * 3;
			overflow: hidden;
			@include display-flex;

			img {
				@include align-self(center);
				width: 100%;
				min-width: $wide;
			}
		}

		&:not(:nth-of-type(1)) {
			figure {
				top: -$col;
				height: $col * 4;
			}
		}

		header {
			position: relative;
			z-index: $z-high;
			height: $col * 2;
			color: $white;
			@include display-flex;

			svg {
				height: $col;
				width: $col;
				padding: $col / 2;
				float: left;
				color: $white;
			}

			h2 {
				padding: $padding-normal $padding-normal $padding-normal 0;
				font-size: $font-biggest;
				line-height: 1.2em;
				@include align-self(center);
			}
		}

		section.page {

			position: relative;
			z-index: $z-low;
			background-color: $white;
			

			aside.sidebar {
				position: absolute;
				top: 0;
				left: 0;
				bottom: 0;
				width: ($col * 2);
				@include transition(width 0.1s ease-in);
				min-height: $col;

				background-color: $grey-lighter;
				margin-right: $padding-normal;
				overflow: hidden;

				button.open-sidebar {
					position: absolute;
					right: 0;
					top: 0;
					bottom: 0;
					width: $padding-normal;

					&:hover {
						background-color: $grey;
					}

					display: none;
				}

				&.open {
					width: ($col * 2);
					//@include box-shadow(rgba(0, 0, 0, 0.5) 0 0 20px);
				}
			}


			section.content {
				
				padding: $padding-normal;
				margin-left: ($col * 2);

				h3 {
					font-size: $font-bigger;
					color: $blue;
					padding: 1em 0;

					&:first-of-type {
						padding-top: 0;
					}
				}

				p {
					line-height: 1.3em;
					font-weight: $regular;
					color: #333;
					padding-bottom: 1em;
				}
			}

		}

	}



	// RESPONSIVE

	// Smaller than 1280px + 160px
	@media screen and (max-width: $wide + $padding-normal) {

		article.document {
			figure {
				img {
					position: absolute;
					left: 50%;
					transform: translateX(-50%);
				}
			}
			section.page {

				aside.sidebar {

					width: $padding-normal;

					button.open-sidebar {
						display: block;
					}
				}

				section.content {
					
					margin-left: $padding-normal;
				}
			}
		}


	}//@media $wide

	// Smaller then 960px + 40px
	@media screen and (max-width: $mid + $padding-normal) {
		article.document {
			figure {
				img {
					min-width: auto;
				}
			}
			&:not(:nth-of-type(1)) {
				figure {
					top: 0;
				}
			}
		}

	}//@media $mid

	// Smaller then 800px
	@media screen and (max-width: $small ) {
		article.document {
			figure {
				img {
					width: auto;
					height: 100%;
				}
			}
		}

	}//@media $small


}//end .page